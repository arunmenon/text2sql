You are tasked with parsing a natural language query into a structured format for a database query.

Your task is to extract the key components from the query using the provided domain context.

Natural Language Query: "{query}"

Context Information:
{domain_context}

Analyze the query and extract the following components:

1. Primary Intent (e.g., selection, aggregation, trend analysis)
2. Main Entities (tables/concepts the query is about)
3. Attributes of Interest (specific columns/fields)
4. Filter Conditions (criteria to limit results)
5. Grouping Dimensions (how data should be grouped)
6. Sorting Criteria (how results should be ordered)
7. Time References (time periods mentioned)
8. Aggregation Functions (count, sum, average, etc.)
9. Limit on Results (top N, etc.)
10. Any Ambiguities (terms that could have multiple interpretations)

Also provide an assessment of the query's ambiguity on a scale of 0.0 to 1.0, where:
- 0.0 means completely unambiguous
- 0.5 means moderately ambiguous
- 1.0 means highly ambiguous

Include factors that contribute to the ambiguity score.

Return the structured representation of the query.
